<script src="https://aframe.io/releases/0.8.0/aframe.min.js"></script>
<script src="https://cdn.rawgit.com/jeromeetienne/AR.js/1.6.0/aframe/build/aframe-ar.js"></script>

<script>

var zahtev=0;
const sleep = (milliseconds) => {
  return new Promise(resolve => setTimeout(resolve, milliseconds))
}
AFRAME.registerComponent('clickhandler', {
    tick: async function () {

	
    if (document.querySelector('#marker1').object3D.visible == true && zahtev==0) {	
	zahtev=1;
	const http=new XMLHttpRequest();
	const url='https://masa996.github.io/ran2021/pika';
			sleep(1500).then(() => {
				console.log("1");
					http.open("GET",url);
			http.send(); 
				zahtev=0;
			})


    } else {
    
	if (document.querySelector('#marker2').object3D.visible == true && zahtev==0) {	
	zahtev=1;
	const url='https://masa996.github.io/ran2021/sonic';		 	
	
			sleep(1500).then(() => {
				console.log("2");
					http.open("GET",url);
			http.send(); 
				zahtev=0;
			})
	
    } 
	
	
    }
}
	
});
</script>
<body style='margin : 0px; overflow: hidden;'>

  <a-scene embedded arjs='sourceType: webcam;'>
      <a-marker id="marker1" preset='hiro'  cursor='rayOrigin: mouse' clickhandler>
	    <a-entity gltf-model="./assets/models/pikachu/pikachu.gltf" 
		rotation="0 30 0" scale="0.5 0.5 0.5"
		/>
              
  </a-marker>
  
  
   <a-marker id="marker2" preset='kanji'  cursor='rayOrigin: mouse' clickhandler>
	    <a-entity gltf-model="./assets/models/sonic/scene.gltf" 
		rotation="0 30 0" scale="2 2 2" 
		/>
              
  </a-marker>
  <a-entity camera>
  </a-entity>
  </a-scene>
</body>